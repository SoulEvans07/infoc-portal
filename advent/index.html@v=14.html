<!DOCTYPE html>
<html lang="hu">

<head>
<meta charset="utf-8">
<title>TEST InfoC :: Adventi naptár</title>
<meta property="og:title" content="TEST InfoC :: Adventi naptár">
<meta property="og:image" content="/modulz/logo.png">
<meta property="og:description" content="TEST InfoC :: Adventi naptár">
<meta property="og:site_name" content="InfoC – Programozás alapjai I.">
<meta name="description" content="TEST InfoC :: Adventi naptár">
<meta name="robots" content="noarchive">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="../modulz/favicon.ico" id="faviconhref">
<link rel="apple-touch-icon" href="../modulz/logo_touch.png">
<link rel="image_src" href="../modulz/logo.png"> 
<link rel="stylesheet" href="../modulz/alap-infoc.css@v101.css">
<link rel="stylesheet" href="../modulz/style/localfonts.css@v101.css">
<script>var infoc = { onloads: [] };</script>
<script src="../modulz/site.js@v101"></script>
</head>

<body class=" doksi-formatum" data-version="101"
    data-halozati-hiba="Hálózati hiba a kérés teljesítése közben."
    data-tul-nagy-keres="A fájl túl nagy!"
    data-biztos-navigal="Biztos el szeretnél navigálni? A nem mentett változások elvesznek."
    data-ird-be-a-keresoszot="Írd be a keresőszót!"
    data-vissza="Vissza">

<div class="bodycontent">

<nav class="menubg clearfix">
<div class="shaper">
<div id="menu" class="menu menu-font-size">
<a id="menu-nyito" class="menu-nyito"  role="button"><i class="hamburger"></i></a>
<div class="menu-brand"><a href="../index/index.html">InfoC</a></div>
<div id="menu-elemek" class="menu-elemek">
<ul>
<li class="almenu "><a>Infó</a>
<ul>
<li><a  href="../index/index.html">Kezdőlap</a>
<li><a  href="../elerhetoseg/index.html">Elérhetőség</a>
</ul>

<li class="almenu "><a>Tananyag</a>
<ul>
<li class="almenu "><a>Előadás</a>
<ul>
<li><a  href="../ea01/index.html">1. hét: típusok, változók, vezérlés</a>
<li><a  href="../ea02/index.html">2. hét: nevezetes algoritmusok, tömbök</a>
<li><a  href="../ea03/index.html">3. hét: függvények, struktúrák</a>
<li><a  href="../ea04/index.html">4. hét: pointerek, sztringek</a>
<li><a  href="../ea05/index.html">5. hét: rendezések, rekurzió</a>
<li><a  href="../ea06/index.html">6. hét: operátorok, számábrázolás</a>
<li><a  href="../ea07/index.html">7. hét: dinamikus memóriakezelés</a>
<li><a  href="../ea08/index.html">8. hét: fájlkezelés, modulok</a>
<li><a  href="../ea10/index.html">10. hét: láncolt listák</a>
<li><a  href="../ea11/index.html">11. hét: bináris fák</a>
<li><a  href="../ea12/index.html">12. hét: állapotgépek, reguláris kifejezések</a>
<li><a  href="../ea13/index.html">13. hét: generikus algoritmusok, visszalépő keresés</a>
<li><a  href="../ea14/index.html">14. hét: összefoglalás</a>
</ul>

<li class="almenu "><a>Labor</a>
<ul>
<li><a  href="../lab01/index.html">1. hét: parancssor, ZIP</a>
<li><a  href="../lab02/index.html">2. hét: egyszerű programok</a>
<li><a  href="../lab03/index.html">3. hét: tömbök, nevezetes algoritmusok</a>
<li><a  href="../lab04/index.html">4. hét: struktúrák és függvények</a>
<li><a  href="../lab06/index.html">6. hét: pointerek, sztringek</a>
<li><a  href="../lab07/index.html">7. hét: rekurzió</a>
<li><a  href="../lab08/index.html">8. hét: dinamikus tömbök I.</a>
<li><a  href="../lab09/index.html">9. hét: dinamikus tömbök II.</a>
<li><a  href="../lab10/index.html">10. hét: láncolt listák</a>
<li><a  href="../lab11/index.html">11. hét: bináris fák</a>
<li><a  href="../lab12/index.html">12. hét: gyakorlás NZH-ra</a>
<li><a  href="../lab13/index.html">13. hét: állapotgépek</a>
<li><a  href="../lab14/index.html">14. hét: labirintus játék</a>
</ul>

<li class="almenu "><a>Gyakorlat</a>
<ul>
<li><a  href="../gy01/index.html">1. hét: adatmodellezés, algoritmusok</a>
<li><a  href="../gy02/index.html">2. hét: tanult algoritmusok</a>
<li><a  href="../gy03/index.html">3. hét: egyszerű programok</a>
<li><a  href="../gy04/index.html">4. hét: tételek és tömbök</a>
<li><a  href="../gy05/index.html">5. hét: származtatott típusok</a>
<li><a  href="../gy06/index.html">6. hét: karakterek, számrendszerek</a>
<li><a  href="../gy07/index.html">7. hét: pointerek használata</a>
<li><a  href="../gy08/index.html">8. hét: rekurzió</a>
<li><a  href="../gy09/index.html">9. hét: dinamikus tömbök</a>
<li><a  href="../gy10/index.html">10. hét: láncolt listák</a>
<li><a  href="../gy12/index.html">12. hét: bináris fák</a>
<li><a  href="../gy13/index.html">13. hét: állapotgépek</a>
<li><a  href="../gy14/index.html">14. hét: generikus algoritmusok</a>
</ul>

<li class="almenu "><a>Példatár</a>
<ul>
<li><a  href="../f01/index.html">1. hét: egyszerű programok</a>
<li><a  href="../f02/index.html">2. hét: logika, sorozatok, tömbök</a>
<li><a  href="../f03/index.html">3. hét: függvények, struktúrák</a>
<li><a  href="../f04/index.html">4. hét: pointerek, sztringek</a>
<li><a  href="../f05/index.html">5. hét: rendezések, rekurzió</a>
<li><a  href="../f06/index.html">6. hét: számábrázolás, bitek</a>
<li><a  href="../f07/index.html">7. hét: dinamikus memóriakezelés</a>
<li><a  href="../f08/index.html">8. hét: parancssor, fájlkezelés, modulok</a>
<li><a  href="../f10/index.html">10. hét: láncolt listák</a>
<li><a  href="../f11/index.html">11. hét: bináris fák, többszörös indirekció</a>
<li><a  href="../f12/index.html">12. hét: állapotgépek</a>
<li><a  href="../f13/index.html">13. hét: generikus algoritmusok</a>
</ul>

<li><a  href="../nhflista/index.html">Nagy házi lista</a>
</ul>

<li class="almenu "><a>Segédlet</a>
<ul>
<li><a  href="../jegyzet/index.html">Jegyzet és puska</a>
<li><a  href="../fejlesztokornyezet.html">Fejlesztőkörnyezetek</a>
<li><a  href="../stilus/index.html">Kódolási stílus</a>
<li><a  href="../for_vs_while/index.html">For vagy while?</a>
<li class="almenu "><a>Nagy házi</a>
<ul>
<li><a  href="../mintanhf/index.html">Minta nagy házi</a>
<li><a  href="../nhfspecifikacio/index.html">Specifikáció: hogyan?</a>
<li><a  href="../debugmalloc/index.html">Debugmalloc, memóriakezelés</a>
<li><a  href="../fajlkezeles/index.html">Fájlkezelés, mappák</a>
<li><a  href="../megjelenites/index.html">Szöveges és grafikus megjelenítés</a>
<li><a  href="../scanf/index.html">Scanf problémák</a>
<li><a  href="../scanf_hibakezeles/index.html">Scanf és hibakezelés</a>
<li><a  href="../karakterkodolas/index.html">Karakterkódolások</a>
<li><a  href="../cbtobbmodul/index.html">Több modulos programok</a>
</ul>

<li class="almenu "><a>ZH</a>
<ul>
<li><a  href="../tldr1/index.html">TL;DR I.</a>
<li><a  href="../tldr2/index.html">TL;DR II.</a>
</ul>

</ul>

<li class="almenu "><a>Extrák</a>
<ul>
<li class="almenu "><a>SVG óra galéria</a>
<ul>
<li><a  href="../orak2021/index.html">SVG óra galéria 2021</a>
<li><a  href="../orak2020/index.html">SVG óra galéria 2020</a>
<li><a  href="../orak2019/index.html">SVG óra galéria 2019</a>
<li><a  href="../orak2018/index.html">SVG óra galéria 2018</a>
<li><a  href="../orak2017/index.html">SVG óra galéria 2017</a>
<li><a  href="../orak2016/index.html">SVG óra galéria 2016</a>
<li><a  href="../orak2015/index.html">SVG óra galéria 2015</a>
</ul>

<li class="almenu "><a>NHF galéria</a>
<ul>
<li><a  href="../nhfgaleria2021/index.html">NHF galéria 2021</a>
<li><a  href="../nhfgaleria2020/index.html">NHF galéria 2020</a>
<li><a  href="../nhfgaleria2019/index.html">NHF galéria 2019</a>
<li><a  href="../nhfgaleria2018/index.html">NHF galéria 2018</a>
<li><a  href="../nhfgaleria2017/index.html">NHF galéria 2017</a>
<li><a  href="../nhfgaleria2016/index.html">NHF galéria 2016</a>
<li><a  href="../nhfgaleria2015/index.html">NHF galéria 2015</a>
<li><a  href="../nhfgaleria2014/index.html">NHF galéria 2014</a>
<li><a  href="../nhfgaleria2013/index.html">NHF galéria 2013</a>
<li><a  href="../nhfgaleria2012/index.html">NHF galéria 2012</a>
</ul>

<li class="almenu "><a>Elmélet</a>
<ul>
<li><a  href="../turing/index.html">Mit tud a számítógép?</a>
<li><a  href="../bf/index.html">BF</a>
<li><a  href="../bitturmix/index.html">Bitturmix</a>
<li><a  href="../kifesto/index.html">Zárt terület kifestése</a>
<li><a  href="../labirintus/index.html">Labirintusok</a>
<li><a  href="../qsort/index.html">Gyorsrendezés</a>
<li><a  href="../tripla/index.html">Tripla indirekció</a>
<li><a  href="../generikus/index.html">Generikus lista</a>
</ul>

<li class="almenu "><a>Gyakorlat</a>
<ul>
<li><a  href="../strlcpy/index.html">Kulturált sztringmásoló</a>
<li><a  href="../xor_csere/index.html">XOR csere</a>
<li><a  href="../include/index.html">include</a>
<li><a  href="../inline/index.html">inline</a>
<li><a  href="../internet/index.html">Internet</a>
</ul>

<li class="almenu "><a>Grafika</a>
<ul>
<li><a  href="../sdl/index.html">SDL grafika</a>
<li><a  href="../sdl_telepito/index.html">SDL telepítés</a>
<li><a  href="../fa/index.html">Fák rajzolása</a>
</ul>

<li class="almenu "><a>Nyelvészet</a>
<ul>
<li><a  href="../mondatelemzo/index.html">Mondatelemző</a>
<li><a  href="../kifejezesek/index.html">Kifejezések</a>
<li><a  href="../derivalas/index.html">Deriválás</a>
</ul>

<li><a  href="index.html">Adventi naptár</a>
</ul>

</ul>
</div>
</div>
</div>
</nav>

<div class="menu-font-size"><div class="menuplaceholder"></div></div>

<main class="doksi">
<div class="shaper">


<section class="slidescreen" data-title="Adventi naptár">
<div class="slide" id="slide_0">

<a id="0" class="namer"></a>


<div class="slidecontent">
  <div class="float" style="margin-top: 0.25em; margin-bottom: 0;"><button type="button" class="vissza" onclick="history.back();">Vissza</button></div>
<h1 class="eloadascim">Adventi naptár</h1>
<div class="focim">
<p class="szerzocim"><i class="szerzo"></i> Czirkos Zoltán · <i class="ido"></i> 2019.02.27.</p>
<p class="kivonat"></p>
</div>
<h2>Virtuális kandalló</h2>

<p>Manapság sok játékban realisztikus háromdimenziós pályán ugrándozhatunk a főhősünkkel – a mai 
gépek és videókártyák számítási teljesítménye mellett ez kivitelezhető. Egykor egy sima forgó 
kockának a kirajzolása teljesen leterhelte a számítógépeket. Minél lassabb egy számítógép, annál 
nagyobb kihívás látványos animációkat kirajzolni vele.

<p>A <a href="http://hu.wikipedia.org/wiki/Demoscene">Demoscene</a> szubkultúra programozóinak, 
grafikusainak, zenészeinek célja, hogy minél látványosabb, érdekesebb ún. demó programokat 
csináljanak, amelyekkel a programozói és művészi tudásukat mutatják be. A 90-es évek elején, 
amikor pl. az nVIDIA még sehol nem volt, a demókban már akkor is rengeteg valós időben számolt 
háromdimenziós animációt lehetett látni. Még régebben különféle effekteket találtak ki, mindig 
olyanokat, amelyek látványosak voltak, de egyszerűen, kevés számítással elő lehetett állítani 
őket. Ilyen az ún. Perlin-zaj vagy plazma effekt, amellyel felhők is rajzolhatóak, de sok demóban lehetett látni 
animált fraktálokat is.

<div class="kozep">
    <img src="advent14-plasma.gif" class="arnyek">
    <img src="advent14-mandelbrot.gif" class="arnyek">
    <img src="advent14-wavy.gif" class="arnyek">
</div>

<p>Viszonylag kevés számítással könnyen lehet tüzet is kirajzolni. Ha minden képkockánál az 
egyes pixelek értékét úgy állítsuk be, hogy azok az alatta lévő pixelek átlagai legyenek (mínusz 
1, hogy hűlést belevegyük), akkor – valaki erre rájött – pont úgy kinéző animációt kapunk, 
mintha az tűz lenne. Csak az egyes értékekhez olyan színeket kell társítani, amelyek a tűzre 
jellemzőek, fekete (sötét) – piros – sárga – fehér (világos).

<img src="advent14-tuzpaletta.png" class="arnyek kozep">

<p>Az alábbi program ilyet rajzol. Hogy tényleg tűz legyen belőle, alulra véletlenszámokat kell 
berakni. És kész. Virtuális kandalló, hideg téli estékre!

<pre   ><code class="language-c">#include &lt;string.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;SDL.h&gt;
#include &lt;SDL2_gfxPrimitives.h&gt;


/* konfig */
enum { fullscreen = 0 };        /* 0 vagy 1 */
enum { w = 320, h = 240 };      /* kép méretei */


typedef unsigned char Kandallo[h][w];

/* az időzítéshez */
Uint32 idozit(Uint32 ms, void *param) {
    SDL_Event ev;
    ev.type = SDL_USEREVENT;
    SDL_PushEvent(&amp;ev);
    return ms;
}


/* kiszamolja a megadott szin indexek kozott az atmenetet. */
void szineket_kiszamol(SDL_Surface *screen, Uint32 *bajtok) {
    /* megcsinálja a színátmeneteket */
    SDL_Color pal[256];
    struct {
        int pos;
        SDL_Color col;
    } szinek[] = {
        {  0,       {   0,   0,   0 } },
        { 16,       {   0,   0,  24 } },
        { 32,       {   0,   0,   0 } },
        { 96,       { 255,   0,   0 } },
        { 192,      { 255, 255,   0 } },
        { 255,      { 255, 255, 255 } },
        { -1 }
    };
    for (int i = 0; szinek[i].pos != -1; ++i) {
        int p1 = szinek[i].pos, p2 = szinek[i+1].pos;
        SDL_Color c1 = szinek[i].col, c2 = szinek[i+1].col;
        for (int j = p1; j &lt;= p2; j++) {
            pal[j].r = c1.r + (c2.r - c1.r) * (j - p1) / (p2 - p1);
            pal[j].g = c1.g + (c2.g - c1.g) * (j - p1) / (p2 - p1);
            pal[j].b = c1.b + (c2.b - c1.b) * (j - p1) / (p2 - p1);
        }
    }
    /* és egyből át is számolja az adott sdl kép pixelformátumára */
    for (int i = 0; i &lt; 256; ++i) {
        bajtok[i] = (pal[i].r &gt;&gt; screen-&gt;format-&gt;Rloss &lt;&lt; screen-&gt;format-&gt;Rshift)
                  | (pal[i].g &gt;&gt; screen-&gt;format-&gt;Gloss &lt;&lt; screen-&gt;format-&gt;Gshift)
                  | (pal[i].b &gt;&gt; screen-&gt;format-&gt;Bloss &lt;&lt; screen-&gt;format-&gt;Bshift);
    }
}


void tuz_animacio(SDL_Surface *screen, Kandallo tuz, Uint32 szinek[]) {
    /* random az aljára: az égő fadarabok helyett. */
    /* random hosszúságú, random színű csíkokat rajzol. */
    int x = 0;
    while (x &lt; w) {
        int szeles = 3 + rand() % 5, szin = rand() % 256, x1;
        for (x1 = x; x1 &lt; x + szeles &amp;&amp; x1 &lt; w; ++x1)
            tuz[h - 1][x1] = szin;
        x += szeles + 5 + rand() % 5;
    }

    /* tűz effekt: minden képpont az alatta lévő képpontok átlaga,
     * és csökken (feketéhez közeledik) minden lépésben. */
    for (int y = 0; y &lt; h; ++y) {
        int yp = y + 2;
        if (yp &gt;= h)
            yp = h - 1;
        int yp2 = y + 3;
        if (yp2 &gt;= h)
            yp2 = h - 1;
        for (int x = 1; x &lt; w - 1; ++x) {
            /* itt az átlagolás */
            int res = (tuz[yp2][x] + tuz[yp][x] + tuz[yp][x + 1] + tuz[yp][x - 1]) / 4;
            /* -1, de csak ha nem csordul túl */
            if (res &gt; 0)
                res--;
            tuz[y][x] = res;
        }
    }

    /* kirajzolás, a régebbi adventiben magyarázott módon, közvetlenül
     * állítgatva a pixeleket tároló bájtokat. */
    /* 2x méretűre nagyítja vízszintesen és függőlegesen is a képet. */
    for (int y = 0; y &lt; h; ++y) {
        Uint32 *sor = (Uint32 *) ((char *) screen-&gt;pixels + y * 2 * screen-&gt;pitch);
        Uint32 *sor1 = (Uint32 *) ((char *) screen-&gt;pixels + (y * 2 + 1) * screen-&gt;pitch);
        for (int x = 0; x &lt; w; ++x) {
            Uint32 szin = szinek[tuz[y][x]];
            sor[x * 2] = szin;
            sor[x * 2 + 1] = szin;
            sor1[x * 2] = szin;
            sor1[x * 2 + 1] = szin;
        }
    }
}


int main(int argc, char *argv[]) {
    /* SDL inicializálása, ablak létrehozása */
    SDL_Init(SDL_INIT_VIDEO | SDL_INIT_TIMER);
    SDL_Window *window = SDL_CreateWindow(&quot;Virtualis kandallo&quot;, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, w * 2, h * 2, fullscreen ? SDL_WINDOW_FULLSCREEN_DESKTOP : 0);
    if (window == NULL) {
        SDL_Log(&quot;Nem hozhato letre az ablak: %s&quot;, SDL_GetError());
        exit(1);
    }
    SDL_Renderer *renderer = SDL_CreateRenderer(window, -1, SDL_RENDERER_SOFTWARE);
    if (renderer == NULL) {
        SDL_Log(&quot;Nem hozhato letre a megjelenito: %s&quot;, SDL_GetError());
        exit(1);
    }
    SDL_Surface *screen = SDL_GetWindowSurface(window);
    Uint32 szinek[256];             /* színek az sdl pixelformátumában */
    szineket_kiszamol(screen, szinek);

    SDL_AddTimer(20, idozit, NULL);     /* 50 fps */

    /* fekete képről indulás */
    Kandallo tuz;                   /* a tűz tere */
    memset(tuz, 0, sizeof(tuz));

    bool quit = false;
    while (!quit) {
        SDL_Event event;
        SDL_WaitEvent(&amp;event);

        switch (event.type) {
            case SDL_QUIT:
            case SDL_KEYDOWN:
                quit = true;
                break;

            case SDL_USEREVENT:
                tuz_animacio(screen, tuz, szinek);
                SDL_RenderPresent(renderer);
                break;
        }
    }

    SDL_Quit();

    return 0;
}</code></pre>
  
    </div>

<div class="clear"></div>

</div>
</section>

</div>
</main>

<footer role="contentinfo">
<div class="shaper">
<div class="footer ">
  <a href="../index/index.html"><img src="../modulz/logo.png" class="footerlogo" alt="Logo"></a>
<div>InfoC – Programozás alapjai I.</div>
<div class="csakkepernyon">
            <a href="../index/index.html">főoldal</a>
         ·     <a href="../elerhetoseg/index.html">elérhetőség</a>
         ·     <a href="../elerhetoseg/index.html#licenc">licenc</a>
         ·     <a href="https://www.facebook.com/infoceetbmehu">facebook</a>
    </div>
<div class="csaknyomtatasban">Kérjük, az oldalak kinyomtatása előtt gondolj a környezetre.</div>
BME EET, 2009-2021.</div>
</div>
</footer>

</div>

<nav>
<a id="scrolltotop"></a>
</nav>

</body>

</html>
